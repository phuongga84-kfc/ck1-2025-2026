<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azota CKI</title>
    <style>
        :root {
            --bg-gradient: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-color: #ffffff;
            --btn-subject: #ffffff;
            --btn-subject-text: #0f2027;
            --btn-back: #ef5350;
            --btn-history: #ffa726;
            --btn-disabled: #546e7a;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }

        body {
            background: var(--bg-gradient);
            min-height: 100vh;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-color);
            overflow: hidden;
            position: relative;
        }

        .container {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px 20px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.37);
            z-index: 10;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .container::-webkit-scrollbar { width: 0; background: transparent; }

        h1 { font-size: 1.8rem; margin-bottom: 20px; text-shadow: 0 0 10px rgba(255,255,255,0.5); }
        h2 { font-size: 1.4rem; margin-bottom: 15px; color: #ffeb3b; }

        .grid-menu { display: flex; flex-direction: column; gap: 12px; }

        .btn {
            display: block;
            text-decoration: none;
            padding: 15px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.3s;
            border: none;
            width: 100%;
        }

        .btn:active { transform: scale(0.98); }

        .btn-subject { background-color: var(--btn-subject); color: var(--btn-subject-text); }
        .btn-history { background-color: var(--btn-history); color: #fff; margin-top: 10px;}
        .btn-back { background-color: var(--btn-back); color: #fff; margin-top: 20px; }

        .btn-disabled {
            background-color: var(--btn-disabled) !important;
            color: #cfd8dc !important;
            cursor: not-allowed;
            pointer-events: none;
            opacity: 0.7;
            box-shadow: none;
        }

        .hidden { display: none !important; }

        .fade-in-up { animation: fadeInUp 0.4s ease-out forwards; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .filter-box {
            margin-bottom: 15px;
            padding: 10px;
            width: 100%;
            border-radius: 8px;
            border: none;
            outline: none;
            font-size: 1rem;
        }

        .history-list {
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 10px;
        }

        .history-item {
            padding: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
        }
        .history-item:last-child { border-bottom: none; }
        .history-item span { color: #ffeb3b; font-weight: bold; }

        .snowflake {
            position: absolute;
            top: -30px;
            color: #fff;
            font-size: 1em;
            pointer-events: none;
            z-index: 1;
            will-change: transform;
        }
    </style>
</head>
<body>

    <div class="container" id="app-container">
        <div class="decoration" style="font-size: 3rem; margin-bottom: 10px;">üéÑ</div>
        
        <div id="view-home" class="fade-in-up">
            <h1>AZOTA CKI <br><span style="font-size: 1rem; font-weight: 400;">2025-2026</span></h1>
            <div class="grid-menu" id="main-menu"></div>
            <button class="btn btn-history" onclick="showHistory()">‚è≥ L·ªãch s·ª≠ thay ƒë·ªïi ƒë√°p √°n</button>
        </div>

        <div id="view-subject" class="hidden">
            <h2 id="subject-title">M√¥n H·ªçc</h2>
            <div class="grid-menu" id="sub-menu"></div>
            <button class="btn btn-back" onclick="goHome()">‚¨ÖÔ∏è Quay l·∫°i trang ch·ªß</button>
        </div>

        <div id="view-history" class="hidden">
            <h2>L·ªãch s·ª≠ thay ƒë·ªïi</h2>
            <select id="subject-filter" class="filter-box" onchange="filterHistory()">
                <option value="all">-- T·∫•t c·∫£ c√°c m√¥n --</option>
            </select>
            <div class="history-list" id="history-content"></div>
            <button class="btn btn-back" onclick="goHome()">‚¨ÖÔ∏è Quay l·∫°i trang ch·ªß</button>
        </div>

    </div>

    <script>
        // ==========================================
        // C·∫§U H√åNH (CONFIG)
        // ==========================================
        const subjectConfig = {
            "To√°n": {
                name: "To√°n üìê",
                locked: false, 
                parts: [
                    { name: "Ph·∫ßn 1", link: "https://azota.vn/de-thi/cpkm0k" },
                    { name: "Ph·∫ßn 2", link: "https://azota.vn/de-thi/lupp2n" },
                    { name: "Ph·∫ßn 3", link: "https://azota.vn/de-thi/v7yinp" },
                    { name: "Ph·∫ßn 1+2", link: "https://azota.vn/de-thi/mywnxx" },
                    { name: "FULL", link: "https://azota.vn/de-thi/ebnjib" }
                ]
            },
            "V·∫≠t L√Ω": {
                name: "V·∫≠t l√Ω ‚öõÔ∏è",
                locked: false,
                parts: [
                    { name: "Ph·∫ßn 1", link: "https://azota.vn/de-thi/3d3tfu" },
                    { name: "Ph·∫ßn 2", link: "https://azota.vn/de-thi/ilz6uu" },
                    { name: "Ph·∫ßn 3", link: "https://azota.vn/de-thi/dqueww" },
                    { name: "Ph·∫ßn 1+2", link: "https://azota.vn/de-thi/wjkseb" },
                    { name: "FULL", link: "https://azota.vn/de-thi/ie9pwm" }
                ]
            },
            "H√≥a H·ªçc": {
                name: "H√≥a h·ªçc üß™",
                locked: false,
                parts: [
                    { name: "Ph·∫ßn 1", link: "https://azota.vn/de-thi/mu8jlj" },
                    { name: "Ph·∫ßn 2", link: "https://azota.vn/de-thi/nmplut" },
                    { name: "Ph·∫ßn 3", link: "https://azota.vn/de-thi/lb2nzh" },
                    { name: "Ph·∫ßn 1+2", link: "https://azota.vn/de-thi/qduhtv" },
                    { name: "FULL", link: "https://azota.vn/de-thi/zzyr1c" }
                ]
            },
            "ƒê·ªãa L√Ω": {
                name: "ƒê·ªãa l√Ω üåç",
                locked: false, 
                parts: [
                    { name: "Ph·∫ßn 1", link: "https://azota.vn/de-thi/rdiwua" },
                    { name: "Ph·∫ßn 2", link: "https://azota.vn/de-thi/hms1ed" },
                    { name: "Ph·∫ßn 3", link: "https://azota.vn/de-thi/d2zg0r" },
                    { name: "Ph·∫ßn 1+2", link: "https://azota.vn/de-thi/yj1pzy" },
                    { name: "FULL", link: "https://azota.vn/de-thi/53px3n" }
                ]
            },
            "L·ªãch S·ª≠": {
                name: "L·ªãch s·ª≠ üìú",
                locked: false,
                parts: [
                    { name: "Ph·∫ßn 1", link: "https://azota.vn/de-thi/ueg2th" },
                    { name: "Ph·∫ßn 2", link: "https://azota.vn/de-thi/zxyzf8" },
                    { name: "FULL", link: "https://azota.vn/de-thi/iy99dd" }
                ]
            },
            "GDKT & PL": {
                name: "GDKT & PL ‚öñÔ∏è",
                locked: false,
                parts: [
                    { name: "Ph·∫ßn 1", link: "https://azota.vn/de-thi/pga2qw" },
                    { name: "Ph·∫ßn 2", link: "https://azota.vn/de-thi/eckltm" },
                    { name: "FULL", link: "https://azota.vn/de-thi/aia0xx" }
                ]
            }
        };

        const historyData = [
            { subject: "S·ª≠", time: "20:00 22/12", content: "c√¢u 5 C -> D" }
        ];

        // ==========================================
        // X·ª¨ L√ù GIAO DI·ªÜN
        // ==========================================

        function initApp() {
            const mainMenu = document.getElementById('main-menu');
            const filterSelect = document.getElementById('subject-filter');
            
            for (let key in subjectConfig) {
                const data = subjectConfig[key];
                
                let btn = document.createElement('button');
                btn.className = 'btn btn-subject';
                btn.innerHTML = data.name;

                if (data.locked === true) {
                    btn.classList.add('btn-disabled');
                } else {
                    btn.onclick = () => openSubject(key);
                }
                
                mainMenu.appendChild(btn);

                let option = document.createElement('option');
                option.value = key;
                option.text = data.name;
                filterSelect.appendChild(option);
            }
        }

        function openSubject(key) {
            const data = subjectConfig[key];
            document.getElementById('subject-title').innerHTML = data.name;
            const subMenu = document.getElementById('sub-menu');
            subMenu.innerHTML = '';

            data.parts.forEach(part => {
                let a = document.createElement('a');
                a.className = 'btn btn-subject';
                a.innerText = part.name;
                
                if (part.link && part.link.trim() !== "") {
                    a.href = part.link;
                    a.target = "_blank"; // QUAN TR·ªåNG: M·ªü link trong tab m·ªõi
                } else {
                    a.href = "#";
                    a.classList.add('btn-disabled');
                    a.innerText += " (Ch∆∞a c√≥)";
                }
                subMenu.appendChild(a);
            });

            switchView('view-subject');
        }

        function showHistory() {
            filterHistory();
            switchView('view-history');
        }

        function filterHistory() {
            const filterVal = document.getElementById('subject-filter').value;
            const historyContainer = document.getElementById('history-content');
            historyContainer.innerHTML = '';

            const filteredData = historyData.filter(item => {
                return filterVal === 'all' || item.subject === filterVal;
            });

            if (filteredData.length === 0) {
                historyContainer.innerHTML = '<div class="history-item">Ch∆∞a c√≥ c·∫≠p nh·∫≠t n√†o.</div>';
                return;
            }

            filteredData.forEach(item => {
                let div = document.createElement('div');
                div.className = 'history-item';
                div.innerHTML = `<span>[${item.subject}]</span> ${item.time}<br>${item.content}`;
                historyContainer.appendChild(div);
            });
        }

        function switchView(viewId) {
            ['view-home', 'view-subject', 'view-history'].forEach(id => {
                const el = document.getElementById(id);
                el.classList.add('hidden');
                el.classList.remove('fade-in-up');
            });

            const target = document.getElementById(viewId);
            target.classList.remove('hidden');
            void target.offsetWidth; 
            target.classList.add('fade-in-up');
        }

        function goHome() {
            switchView('view-home');
        }

        // ==========================================
        // TUY·∫æT R∆†I (ƒê√£ ch·ªânh ch·∫≠m l·∫°i)
        // ==========================================
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.textContent = '‚ùÑ';
            
            snowflake.style.left = Math.random() * window.innerWidth + 'px';
            const size = Math.random() * 10 + 8;
            snowflake.style.fontSize = size + 'px';
            snowflake.style.opacity = Math.random() * 0.7 + 0.3;
            
            document.body.appendChild(snowflake);

            const endTop = window.innerHeight + size + 50;
            
            // CH·ªàNH S·ª¨A T·ªêC ƒê·ªò ·ªû ƒê√ÇY:
            // T·ª´ 10000ms (10s) ƒë·∫øn 15000ms (15s) -> R·∫•t ch·∫≠m
            const duration = Math.random() * 5000 + 10000; 

            const animation = snowflake.animate([
                { transform: `translateY(0px) rotate(0deg)` },
                { transform: `translateY(${endTop}px) rotate(${Math.random() * 360}deg)` }
            ], {
                duration: duration,
                easing: 'linear'
            });

            animation.onfinish = () => {
                snowflake.remove();
            };
        }

        // TƒÉng th·ªùi gian t·∫°o tuy·∫øt l√™n 500ms ƒë·ªÉ tr√°nh qu√° nhi·ªÅu tuy·∫øt tr√™n m√†n h√¨nh
        setInterval(createSnowflake, 500);

        initApp();

    </script>
</body>
</html>